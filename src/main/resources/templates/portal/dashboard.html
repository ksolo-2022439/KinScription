<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
    <title>Dashboard del Participante</title>
</head>
<body>
<main layout:fragment="content">
    <header class="main-header">
        <h1>Bienvenido al Portal de Inscripción</h1>
        <p>Sigue los pasos a continuación para completar tu proceso.</p>
    </header>

    <section class="progress-steps">
        <div class="progress-line-bg"></div>
        <div class="progress-line-fg" th:style="'width: ' + ${progressPercentage} + '%;'"></div>

        <div class="step" th:classappend="${#lists.contains({'PENDIENTE_EXAMEN', 'ADMITIDO_EXAMEN', 'ADMITIDO_SOCIOECONOMICO', 'ADMITIDO_FORMULARIO', 'ADMITIDO_PAPELERIA', 'ADMITIDO_CONTRATO', 'FINALIZADO'}, participante.estado)} ? 'active' : ''">
            <div class="circle">
                <span class="step-number">1</span>
                <svg class="step-check" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
            </div>
            <p>Examen</p>
        </div>

        <div class="step" th:classappend="${#lists.contains({'ADMITIDO_SOCIOECONOMICO', 'ADMITIDO_FORMULARIO', 'ADMITIDO_PAPELERIA', 'ADMITIDO_CONTRATO', 'FINALIZADO'}, participante.estado)} ? 'completed' : (${participante.estado.name() == 'ADMITIDO_EXAMEN'} ? 'active' : '')">
            <div class="circle">
                <span class="step-number">2</span>
                <svg class="step-check" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
            </div>
            <p>Socioeconómico</p>
        </div>

        <div class="step" th:classappend="${#lists.contains({'ADMITIDO_PAPELERIA', 'ADMITIDO_CONTRATO', 'FINALIZADO'}, participante.estado)} ? 'completed' : (${participante.estado.name() == 'ADMITIDO_FORMULARIO'} ? 'active' : '')">
            <div class="circle">
                <span class="step-number">3</span>
                <svg class="step-check" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
            </div>
            <p>Papelería</p>
        </div>

        <div class="step" th:classappend="${#lists.contains({'ADMITIDO_CONTRATO', 'FINALIZADO'}, participante.estado)} ? 'completed' : (${participante.estado.name() == 'ADMITIDO_PAPELERIA'} ? 'active' : '')">
            <div class="circle">
                <span class="step-number">4</span>
                <svg class="step-check" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
            </div>
            <p>Contrato</p>
        </div>

        <div class="step" th:classappend="${participante.estado.name() == 'FINALIZADO'} ? 'completed' : ''">
            <div class="circle">
                <span class="step-number">5</span>
                <svg class="step-check" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
            </div>
            <p>Finalizado</p>
        </div>
    </section>

    <section class="content-cards" th:switch="${participante.estado.name()}">

        <div th:case="'PENDIENTE_EXAMEN'" class="card active">
            <h3>Evaluación de Ingreso</h3>
            <p>Este es el primer paso. Debes realizar tu examen de admisión en la fecha y hora programadas para
                continuar.</p>
            <div class="card-details">
                <span><strong>Fecha:</strong> 25 de Octubre, 2025</span>
                <span><strong>Hora:</strong> 9:00 AM</span>
            </div>
            <button class="btn-primary">Iniciar Examen</button>
        </div>

        <div th:case="'ADMITIDO_EXAMEN'" class="card active">
            <h3>Formulario Socioeconómico</h3>
            <p>¡Felicidades, aprobaste el examen! Ahora, por favor completa el formulario socioeconómico. Esta
                información es confidencial y se usará para definir tus cuotas.</p>
            <button class="btn-primary">Llenar Formulario</button>
        </div>

        <div th:case="'ADMITIDO_SOCIOECONOMICO'" class="card waiting">
            <h3>Formulario en Revisión</h3>
            <p>Hemos recibido tu formulario. Está siendo revisado por nuestro personal administrativo y de orientación.
                Te notificaremos cuando el proceso continúe.</p>
        </div>

        <div th:case="'ADMITIDO_FORMULARIO'" class="card active">
            <h3>Entrega de Papelería</h3>
            <p>Tu solicitud ha sido aprobada. El siguiente paso es subir los documentos requeridos a la plataforma.</p>
            <button class="btn-primary">Subir Documentos</button>
        </div>

        <div th:case="'ADMITIDO_PAPELERIA'" class="card active">
            <h3>Firma de Contrato</h3>
            <p>Tu expediente está completo. Descarga el contrato, fírmalo con la ayuda de un abogado y súbelo en formato
                PDF para finalizar.</p>
            <button class="btn-primary">Gestionar Contrato</button>
        </div>

        <div th:case="'ADMITIDO_CONTRATO'" class="card waiting">
            <h3>Generando Credenciales</h3>
            <p>¡Casi terminamos! Estamos generando tu cuenta institucional. En breve, verás tus credenciales finales en
                este portal.</p>
        </div>

        <div th:case="'FINALIZADO'" class="card completed">
            <h3>¡Proceso de Inscripción Finalizado!</h3>
            <p>¡Bienvenido a la comunidad académica! Estas son tus credenciales de acceso al campus principal.</p>
            <div class="credentials-box">
                <p><strong>Correo Institucional:</strong> <span th:text="${alumno.emailAcademico}">jperez-2025001@kinal.edu.gt</span>
                </p>
                <p><strong>Contraseña Temporal:</strong> <span>password123</span></p>
            </div>
            <small>Recuerda cambiar tu contraseña en tu primer inicio de sesión.</small>
        </div>
    </section>
</main>
</body>
</html>